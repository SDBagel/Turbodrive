<div>
  <app-navbar></app-navbar>
  <section class="page">
    <div class="container-full d-flex">
      <div class="sidebar d-flex">
        <img src="assets/img/Banner1.png" alt="TurboPlant">
        <div class="text">
          <div class="card" *ngFor="let course of courses">
            <span class="icon"><svg><use xlink:href="assets/icons/icons.svg#turbo-roster"></use></svg></span>
            <div class="text">
              <b>{{course.name}}</b>
              <p class="text-secondary description">Created on {{course.creationTime | date}}</p>
            </div>
          </div>
          <div class="card text-center" *ngIf="!this.courses">
            <p>No classes!</p>
          </div>
        </div>
      </div>
      <div id="assignments">
        <section class="assignment-group" *ngFor="let course of courses">
          <a routerLink="/class/{{course.id}}" class="title-sm">{{course.name}}</a>
          <div class="scroll-group">
            <span class="icon-finished" *ngIf="courseData[course.id]?.announcements?.length === 0 && courseData[course.id]?.assignments?.length === 0">
              <svg><use xlink:href="assets/icons/icons.svg#turbo-check"></use></svg>
              <p>Whew! Finished.</p>
            </span>
            <ng-container *ngFor="let update of courseData[course.id]?.announcements?.slice(0, 2)">
              <div class="card" *ngIf="!update.read">
                <span class="icon"><svg><use xlink:href="assets/icons/icons.svg#turbo-important"></use></svg></span>
                <div class="text">
                  <div class="row">
                    <span>Announcement</span>
                    <span>{{update.creationTime | date}}</span>
                  </div>
                  <div class="actions">
                    <button class="action" title="Copy Text">c</button>
                    <button class="action" title="Add to To Do">t</button>
                    <button class="action" title="Mark Read" (click)="markAsRead(course.id, 'announcements', update.id)">r</button>
                  </div>
                  <p class="text-secondary description">{{update.text}}</p>
                  <card-materials [materials]=update.materials></card-materials>
                </div>
              </div>
            </ng-container>
            <div class="card" *ngIf="courseData[course.id]?.announcements?.length > 2">
              <div class="text">
                <div class="row">
                  <span>More Unread Announcements</span>
                </div>
                <div class="actions">
                  <button class="action" title="Mark All as Read" (click)="markAllRead(course.id, 'announcements', 2)">r</button>
                </div>
                <p class="text-secondary description text-left">There are more unread announcements.</p>
              </div>
            </div>
            <div class="card" *ngFor="let work of courseData[course.id]?.assignments?.slice(0, 3)">
              <span class="icon"><svg><use xlink:href="assets/icons/icons.svg#turbo-clipboard"></use></svg></span>
              <div class="text">
                <div class="row">
                  <span>{{work.title}}</span>
                </div>
                <div class="actions">
                  <button class="action" title="Add to To Do">t</button>
                  <button class="action" title="Dismiss" (click)="markAsRead(course.id, 'assignments', work.id)">d</button>
                  <button class="action" title="Submit">s</button>
                </div>
                <span class="title-caption">{{work.dueDate | dueDateTime: work.dueTime | date: "E L/d h:mm a"}}</span>
                <p class="text-secondary description">{{work.description}}</p>
                <card-materials [materials]=work.materials></card-materials>
              </div>
            </div>
            <div class="card" *ngIf="courseData[course.id]?.assignments?.length > 3">
              <div class="text">
                <div class="row">
                  <span>More Incomplete Assignments</span>
                </div>
                <p class="text-secondary description text-left">There are more incomplete assignments.</p>
              </div>
            </div>
            <br>
          </div>
        </section>
      </div>
    </div>
  </section>
</div>